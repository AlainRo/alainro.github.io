<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>SparkLinesDef</title>
        <link type="text/css" rel="stylesheet" href="appbase.css">
        <link type="text/css" rel="stylesheet" href="wikistyle.css">
<script src="http://perceptible.fr/files/protovis-r32.js" type="text/javascript"> </script>
    </head>
    <body class="wikidpad">
<span class="wikidpad parent-nodes">parent nodes: <span class="wikidpad parent-node"><a href="Protovis.html" class="wikidpad">Protovis</a></span><br class="wikidpad" /><br class="wikidpad" /></span>
<br />
<script type="text/javascript+protovis">
var bars = [0.2, 0.3, 0.6, 0.1, 0.9, 0.8, 0.23, 0.77, 0.63, 0.43, 0.59, 0.11];

var sunspots = [
  40, 115, 100, 80, 60, 40, 23, 10, 10, 25, 75, 145,
  130, 130, 80, 65, 20, 10, 5, 10, 60, 190, 180, 175,
  120, 50, 35, 20, 10, 15, 30, 60, 105, 105, 105, 80, 65
];

function walk(n) {
  var array = [], value = 0, i = 0;
  while (n-- > 0) array.push(value += (Math.random() - .5));
  return array;
}

function random(n) {
  return pv.range(n).map(function() { return pv.random(2);});
}

function sparkline(data, dots) {
  var n = data.length,
      w = 2*n,
      h = 10,
      min = pv.min.index(data),
      max = pv.max.index(data);

  var vis = new pv.Panel()
      .width(w)
      .height(h)
      .margin(2);

  vis.add(pv.Line)
      .data(data)
      .left(pv.Scale.linear(0, n - 1).range(0, w).by(pv.index))
      .bottom(pv.Scale.linear(data).range(0, h))
      .strokeStyle("#000")
      .lineWidth(1)
    .add(pv.Dot)
      .visible(function() (dots && this.index == 0) || this.index == n - 1)
      .strokeStyle(null)
      .fillStyle("brown")
      .radius(2)
    .add(pv.Dot)
      .visible(function() dots && (this.index == min || this.index == max))
      .fillStyle("steelblue");

  vis.render();
}

function sparktick(data) {
  var w = data.length * 4,
      h = 11;

  var vis = new pv.Panel()
      .width(w)
      .height(h);

  vis.add(pv.Rule)
  	.bottom(h/2)
	.strokeStyle("grey");

  vis.add(pv.Bar)
	.data(data)
	.width(3)
	.left(function() 4 * this.index)
	.bottom(function(d) d ? h / 2 : 0)
	.height(h / 2)
	.strokeStyle("transparent")
	.fillStyle(function(d) d ? "grey" : "brown");
vis.render();
}


function sparkbar(data) {
  var w = 60,
      h = 12;

  var vis = new pv.Panel()
      .width(w)
      .height(h);

  vis.add(pv.Bar)
      .data(bars)
      .width(4)
      .left(function() 5 * this.index)
      .height(function(d) Math.round(h * d))
      .bottom(0);

  vis.render();
}

function dot(color) {
  var vis = new pv.Panel()
      .width(6)
      .height(9)
    .anchor("center").add(pv.Dot)
      .strokeStyle(null)
      .fillStyle(color)
      .radius(3);
  vis.render();
}

</script>    </body>
</html>
