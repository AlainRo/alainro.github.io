<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>BarFinal</title>
        <link type="text/css" rel="stylesheet" href="appbase.css">
        <link type="text/css" rel="stylesheet" href="wikistyle.css">
<script src="http://perceptible.fr/files/protovis-r32.js" type="text/javascript"> </script>
    </head>
    <body class="wikidpad">
<span class="wikidpad parent-nodes">parent nodes: <span class="wikidpad parent-node"><a href="Protovis.html" class="wikidpad">Protovis</a></span><br class="wikidpad" /><br class="wikidpad" /></span>
<a name=".h0"></a><h2 class="heading-level2">Bar Final</h2>
<script type="text/javascript+protovis">	
var width = 620,
	height = 400,
	leftMargin = 50
	bottomMargin = 50;
	
var dataRange = 70700,
	xScale = pv.Scale.linear(0, stocks.length).range(0, width-100),
	total = pv.Scale.linear(0, dataRange).range(0, height-bottomMargin-20);
	
	var activeBar = 122;
	
	var labelXpos = 70,
		labelYpos = 370,
		source = "Source: Google Finance",
	
	
	var techstocks = new; pv.Panel().width(width).height(height)
		.event("mousemove", pv.Behavior.point(Infinity).collapse("y"));
		
				techstocks.add(pv.Rule)
		.data(pv.range(0, dataRange, 10000))
		.bottom(function(d) d / (height+27) * 2 + bottomMargin)
		.left(leftMargin-5)
		.right(50)
		.strokeStyle("lightgray")
		.add(pv.Label)
		.text(function(d) "$" + ((d)/100))
		.textAlign("right")
		.textBaseline("middle")
		.textStyle("lightgray")
		.font("7pt sans-serif");
		
				techstocks.add(pv.Label)
		
		
				techstocks.add(pv.Rule)
		.data(stocks)
		.left(function() leftMargin + xScale(this.index))
		.bottom(bottomMargin)
		.lineWidth(5)
		.strokeStyle(function() (activeBar == this.index) ? "#efefef" : "transparent");
		
				techstocks.add(pv.Bar)
		.bottom(labelYpos-140)
		.left(labelXpos-20)
		.right(width-labelXpos-150)
		.fillStyle("white");
		
				techstocks.add(pv.Line)
			.data(stocks)
			.left(function() leftMargin + xScale(this.index))
			.bottom(function(d) bottomMargin + total(d.APPL))
			.height(height)
			.lineWidth(2)
			.strokeStyle("orange")
			.add(pv.Dot)
			.strokeStyle(null)
			.event("point", function() {activeBar = this.index; return techstocks;})
			.fillStyle(function() (activeBar == this.index) ? "orange" : "transparent")
			.size(10);
			
			techstocks.add(pv.Line)
				.data(stocks)
				.left(function() leftMargin + xScale(this.index))
				.bottom(function(d) bottomMargin + total(d.AMZN))
				.height(height)
				.lineWidth(2)
				.strokeStyle("black")
				.add(pv.Dot)
				.strokeStyle(null)
				.event("point", function() {activeBar = this.index; return techstocks;})
				.fillStyle(function() (activeBar == this.index) ? "black" : "transparent")
				.size(10);
				
				techstocks.add(pv.Line)
					.data(stocks)
					.left(function() leftMargin + xScale(this.index))
					.bottom(function(d) bottomMargin + total(d.GOOG))
					.height(height)
					.lineWidth(2)
					.strokeStyle("red")
					.add(pv.Dot)
					.strokeStyle(null)
					.event("point", function() {activeBar = this.index; return techstocks;})
					.fillStyle(function() (activeBar == this.index) ? "red" : "transparent")
					.size(10);
					
					techstocks.add(pv.Line)
						.data(stocks)
						.left(function() leftMargin + xScale(this.index))
						.bottom(function(d) bottomMargin + total(d.IBM))
						.height(height)
						.lineWidth(2)
						.strokeStyle("steelblue")
						.add(pv.Dot)
						.strokeStyle(null)
						.event("point", function() {activeBar = this.index; return techstocks;})
						.fillStyle(function() (activeBar == this.index) ? "steelblue" : "transparent")
						.size(10);
						
						
						techstocks.add(pv.Line)
							.data(stocks)
							.left(function() leftMargin + xScale(this.index))
							.bottom(function(d) bottomMargin + total(d.MSFT))
							.height(height)
							.lineWidth(2)
							.strokeStyle("green")
							.add(pv.Dot)
							.strokeStyle(null)
							.event("point", function() {activeBar = this.index; return techstocks;})
							.fillStyle(function() (activeBar == this.index) ? "green" : "transparent")
							.size(10);
			
			
						techstocks.add(pv.Label)
					.text(function(d) stocks[activeBar].Date)
					.left(labelXpos)
					.bottom(labelYpos)
					.font("bold 11pt  sans-serif");
					
					techstocks.add(pv.Label)
	.text(function(d) ("Amazon: $" + ((stocks[activeBar].AMZN))/100))
	.left(labelXpos+10)
	.bottom(labelYpos-20)
	.font("9pt sans-serif")
	.add(pv.Dot)
	.strokeStyle(null)
	.fillStyle("black")
	.size(10)
	.left(labelXpos+5)
	.bottom(labelYpos-13);
	
	techstocks.add(pv.Label)
.text(function(d) ("Apple: $" + ((stocks[activeBar].APPL))/100))
.left(labelXpos+10)
.bottom(labelYpos-40)
.font("9pt sans-serif")
.add(pv.Dot)
.strokeStyle(null)
.fillStyle("orange")
.size(10)
.left(labelXpos+5)
.bottom(labelYpos-33);

techstocks.add(pv.Label)
.text(function(d) ("Google: $" + ((stocks[activeBar].GOOG))/100))
.left(labelXpos+10)
.bottom(labelYpos-60)
.font("9pt sans-serif")
.add(pv.Dot)
.strokeStyle(null)
.fillStyle("red")
.size(10)
.left(labelXpos+5)
.bottom(labelYpos-53);

techstocks.add(pv.Label)
.text(function(d) ("IBM: $" + ((stocks[activeBar].IBM))/100))
.left(labelXpos+10)
.bottom(labelYpos-80)
.font("9pt sans-serif")
.add(pv.Dot)
.strokeStyle(null)
.fillStyle("steelblue")
.size(10)
.left(labelXpos+5)
.bottom(labelYpos-73);
	
	
techstocks.add(pv.Label)
.text(function(d) ("Microsoft: $" + ((stocks[activeBar].AMZN))/100))
.left(labelXpos+10)
.bottom(labelYpos-100)
.font("9pt sans-serif")
.add(pv.Dot)
.strokeStyle(null)
.fillStyle("green")
.size(10)
.left(labelXpos+5)
.bottom(labelYpos-93);				
					techstocks.add(pv.Label)
					.text(source)
					.left(labelXpos)
					.bottom(labelYpos-120)
					.font("6pt sans-serif");
					
		techstocks.add(pv.Panel)
	.events("all")
	.event("point", function() {activeBar = this.index; return techstocks;});
	 
	techstocks.render();
</script><br />
    </body>
</html>
