<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>ScratchPad</title>
        <link type="text/css" rel="stylesheet" href="appbase.css">
        <link type="text/css" rel="stylesheet" href="wikistyle.css">
<script src="http://perceptible.fr/files/protovis-r32.js" type="text/javascript"> </script>
    </head>
    <body class="wikidpad">
<span class="wikidpad parent-nodes">parent nodes: <br class="wikidpad" /><br class="wikidpad" /></span>
<a name=".h0"></a><h2 class="heading-level2">Scratch Pad</h2>
<script src="http://kdmc.berkeley.edu/media/js/protovis/protovis-r3.2.js" type="text/javascript"> </script><br />
<br />
<code><br />
<style type='text/css'><br />
.wrapper{<br />
<ul class="wikidpad normalindent">position: relative;<br />
float: left;<br />
margin-bottom: 4px;<br />
</ul>
<ul class="wikidpad normalindent">}<br />
</ul>
.title{<br />
<ul class="wikidpad normalindent">position: relative;<br />
float: left;<br />
left: 2px;<br />
width: 100px;<br />
height: 20px;<br />
<br />
</ul>
}<br />
.alert{<br />
<ul class="wikidpad normalindent">position: relative;<br />
float: left;<br />
left: 0px;<br />
width: 12px;<br />
height: 20px;<br />
<br />
</ul>
}<br />
.measure{<br />
<ul class="wikidpad normalindent">position: relative;<br />
float: left;<br />
left: 5px;<br />
width: 110px;<br />
height: 20px;<br />
<br />
</ul>
}<br />
<br />
.finalmeasure{<br />
<ul class="wikidpad normalindent">position: relative;<br />
float: right;<br />
right: 0px;<br />
width: 150px;<br />
height: 20px;<br />
<br />
</ul>
}<br />
.titlecolor{<br />
<ul class="wikidpad normalindent">color:#9E886A;<br />
</ul>
}<br />
#fig {<br />
<ul class="wikidpad normalindent">width: 430px;<br />
height: 225px;<br />
</ul>
}<br />
</style><br />
<ul class="wikidpad normalindent"><span class="titlecolor">	<br />
<div class="wrapper"><br />
<ul class="wikidpad normalindent"><div class="title"><p class="titlecolor">Revenues</p></div><br />
<div class="alert"></div><br />
<div class="measure">Actual</div><br />
<div class="measure">Target</div><br />
</ul>
<ul class="wikidpad normalindent"><div class="measure">Variance</div><br />
<div class="measure">Trend</div><br />
<div class="finalmeasure">Performance</div> <br />
</ul>
</div> <br />
</span><br />
<div class="wrapper"><br />
<ul class="wikidpad normalindent"><div class="title">Y.T.D.</div><br />
<div class="alert"><br />
<ul class="wikidpad normalindent"><script type="text/javascript+protovis"><br />
alert("red");<br />
</ul>
</ul>
<ul class="wikidpad normalindent"></script></div><br />
<ul class="wikidpad normalindent"><div class="measure">$4,253,310</div><br />
</ul>
</ul>
<ul class="wikidpad normalindent"><div class="measure">$6,234,865</div><br />
<div class="measure"> $(1,981,555)</div><br />
<ul class="wikidpad normalindent"><div class="measure"><br />
<ul class="wikidpad normalindent"><script type="text/javascript+protovis"><br />
sparkline(ytd);<br />
</script> </div><br />
</ul>
<div class="finalmeasure"><br />
<ul class="wikidpad normalindent"><script type="text/javascript+protovis"><br />
sparkbullet(bulletytd);<br />
</script></div> <br />
</ul>
</ul>
</ul>
</div> <br />
<div class="wrapper"><br />
<ul class="wikidpad normalindent"><div class="title">Rolling Year</div><br />
<div class="alert"><br />
<ul class="wikidpad normalindent"><script type="text/javascript+protovis"><br />
alert("red");<br />
</script></div><br />
</ul>
<div class="measure">$7,745,454</div><br />
</ul>
<ul class="wikidpad normalindent"><div class="measure">$8,543,645</div><br />
<div class="measure"> $(798,191)</div><br />
<ul class="wikidpad normalindent"><div class="measure"><br />
<ul class="wikidpad normalindent"><script type="text/javascript+protovis"><br />
sparkline(rollingyear);<br />
</script> </div><br />
</ul>
<div class="finalmeasure"><br />
</ul>
<ul class="wikidpad normalindent"><script type="text/javascript+protovis"><br />
<ul class="wikidpad normalindent">sparkbullet(bulletrollingyear);<br />
</ul>
</script></div> <br />
</ul>
</ul>
</div> <br />
<div class="wrapper"><br />
<ul class="wikidpad normalindent"><div class="title">Quarter</div><br />
<div class="alert"></div><br />
<div class="measure">$2,144,567 </div><br />
</ul>
<ul class="wikidpad normalindent"><div class="measure">$1,707,563</div><br />
<div class="measure">$437,004</div><br />
<ul class="wikidpad normalindent"><div class="measure"><br />
</ul>
<script type="text/javascript+protovis"><br />
sparkline(quarter);<br />
</script> </div><br />
<ul class="wikidpad normalindent"><div class="finalmeasure"><br />
</ul>
<script type="text/javascript+protovis"><br />
sparkbullet(bulletquarter);<br />
</script></div> <br />
</ul>
</div> <br />
<div class="wrapper"><br />
<ul class="wikidpad normalindent"><div class="title">Month</div><br />
<div class="alert"></div><br />
<div class="measure">$475,534</div><br />
</ul>
<ul class="wikidpad normalindent"><div class="measure">$410,596</div><br />
<div class="measure">$64,938</div><br />
<ul class="wikidpad normalindent"><div class="measure"><br />
</ul>
<script type="text/javascript+protovis"><br />
sparkline(month);<br />
</script> </div><br />
<ul class="wikidpad normalindent"><div class="finalmeasure"><br />
</ul>
<script type="text/javascript+protovis"><br />
sparkbullet(bulletmonth);<br />
</script></div> <br />
</ul>
</div> <br />
</ul>
</code><br />
<hr size="1" />
<br />
<a name=".h3291"></a><h2 class="heading-level2">Accès CSV</h2>
<html>
<head>
 <title>Bullet Charts</title>
<style type="text/css">
 span {
  display: block !important;
}

#fig {
  width: 520px;
  height: 350px;
}

</style>

 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>

 
</head>
<body>

<div id="center"><div id="fig">
    
<script type="text/javascript+protovis">
    
// Déclaration interne
/*
var bullets = [
  {
    title: "Revenue",
    subtitle: "US$, in thousands",
//    ranges: [150, 225, 300],
    rangebad: 150,
    rangeok:  225,
    rangegood: 300,
    measures: 270,
//    markers: []
  },
  {
    title: "Profit",
    subtitle: "%",
//    ranges: [20, 25, 30],
    rangebad: 20,
    rangeok:  25,
    rangegood: 30,
    measures: 23,
//    markers: []
  },
  {
    title: "Order Size",
    subtitle: "US$, average",
//    ranges: [350, 500, 600],
    rangebad: 350,
    rangeok:  500,
    rangegood: 600,    
    measures: 320,
//    markers: []
  },
  {
    title: "New Customers",
    subtitle: "count",
//    ranges: [1400, 2000, 2500],
    rangebad: 1400,
    rangeok:  2000,
    rangegood: 2500,
    measures: 1650,
//    markers: []
  },
  {
    title: "Satisfaction",
    subtitle: "out of 5",
//    ranges: [3.5, 4.25, 5],
    rangebad: 3.5,
    rangeok:  4.25,
    rangegood: 5,
    measures: 4.7,
//    markers: []
  }
];
*/
// Accès au JSON

var dataURL = "indicateurs.json";

var JSONdata = $.ajax({ type: "GET", url: dataURL, async: false }).
responseText;
var bullets = JSON.parse(JSONdata);

var i = 0;
var j = 0;


bullets = bullets.map(function (d) {
	d.ranges =[d.rangebad , d.rangeok, good = d.rangegood]
	i = d.ranges[0]
	j = d.ranges[1]
	d.markers = [i+(j-i)/2]
	d.measures = [d.measures]
	return d;
});

var format = pv.Format.number();

var vis = new pv.Panel()
    .data(bullets)
    .width(400)
    .height(30)
    .margin(20)
    .left(100);

var bullet = vis.add(pv.Layout.Bullet)
    .orient("left")
    .ranges(function(d) d.ranges)
    .measures(function(d) d.measures)
    .markers(function(d) d.markers);

//La mesure
bullet.range.add(pv.Bar);
bullet.measure.add(pv.Bar)
     .fillStyle("black");
//L'objectif
bullet.marker.add(pv.Dot)
    .lineWidth(1)
    .strokeStyle("red");
/* Un commentaire sur plusieurs lignes
2
*/
bullet.tick.add(pv.Rule)
    .anchor("bottom").add(pv.Label)
    .text(bullet.x.tickFormat);

bullet.anchor("left").add(pv.Label)
    .font("bold 12px sans-serif")
    .textAlign("right")
    .textBaseline("bottom")
    .text(function(d) d.title);

bullet.anchor("left").add(pv.Label)
    .textStyle("#666")
    .textAlign("right")
    .textBaseline("top")
    .text(function(d) d.subtitle);

vis.render();

    </script>
  </div></div>
  
</body>
</html>




SparkandBullet Stock<br />
    </body>
</html>
