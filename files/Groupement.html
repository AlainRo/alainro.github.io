<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>Groupement</title>
        <link type="text/css" rel="stylesheet" href="appbase.css">
        <link type="text/css" rel="stylesheet" href="wikistyle.css">
<script src="http://perceptible.fr/files/protovis-r32.js" type="text/javascript"> </script>
    </head>
    <body class="wikidpad">
<span class="wikidpad parent-nodes">parent nodes: <span class="wikidpad parent-node"><a href="Protovis.html" class="wikidpad">Protovis</a></span><br class="wikidpad" /><br class="wikidpad" /></span>
<a name=".h0"></a><h2 class="heading-level2">Groupement</h2>
<script type="text/javascript+protovis">

function walk(n) {
  var array = [], value = 0, i = 0;
  while (n-- > 0) array.push(value += (Math.random() - .5));
  return array;
}


function random(n) {
  return pv.range(n).map(function() { return pv.random(2); });
}


function sparkline(data, dots) {
  var n = data.length,
      w = 200,
      h = 30,
      min = pv.min.index(data),
      max = pv.max.index(data);

  var vis = new pv.Panel()
      .width(w)
      .height(h)
      .margin(5);

  vis.add(pv.Line)
      .data(data)
      .left(pv.Scale.linear(0, n - 1).range(0, w).by(pv.index))
      .bottom(pv.Scale.linear(data).range(0, h))
      .strokeStyle("#000")
      .lineWidth(1)
    .add(pv.Dot)
      .visible(function() (dots && this.index == 0) || this.index == n - 1)
      .strokeStyle(null)
      .fillStyle("brown")
      .radius(2)
    .add(pv.Dot)
      .visible(function() dots && (this.index == min || this.index == max))
      .fillStyle("steelblue");
  vis.render();
}


function sparktick(data) {
  var w = data.length * 2,
      h = 11;

  var vis = new pv.Panel()
      .width(w)
      .height(h);

  vis.add(pv.Rule)
      .bottom(h / 2)
      .strokeStyle("#870")
        .add(pv.Rule)
      .data(data)
      .left(function() 2 * this.index)
      .bottom(function(d) d ? h / 2 : 0)
      .height(h / 2);

  vis.render();
}


function sparkbar(data) {
  var w = 120,
      h = 12;

  var vis = new pv.Panel()
      .width(w)
      .height(h);

  vis.add(pv.Bar)
      .data(bars)
      .width(4)
      .left(function() 5 * this.index)
      .height(function(d) Math.round(h * d))
      .bottom(0);

  vis.render();
}


function dot(color) {
  new pv.Panel()
      .width(6)
      .height(9)
    .anchor("center").add(pv.Dot)
      .strokeStyle(null)
      .fillStyle(color)
      .radius(2)
    .root.render();
}




</script>


<div id="wrap">
    <script type="text/javascript+protovis">
    var vis = new pv.Panel()
        .width(100)
        .height(30)
        .margin(5)
        .anchor("left").add(pv.Label)
        .textStyle("black")
        .textAlign("left")
        .textBaseline("bottom")
        .font("bold 12px sans-serif")
        .text("Revenu");
	vis.anchor("left").add(pv.Label)
        .textStyle("#666")
        .textAlign("right")
        .textBaseline("top")
        .text("sous titre");
        vis.render();
    </script>	
</div>
<div id="left">
    <h2> Historique </h2>
    <script type="text/javascript+protovis">
    sparkline(walk(150),1);
    </script>
</div>

<div id="right">
    <h2> Valeur </h2>
    <script type="text/javascript+protovis">
		
var bullets = [
  {
    title: "Revenue",
    subtitle: "US$, in thousands",
    ranges: [150, 225, 300],
    measures: [270],
    markers: []
  }
];

var i = 0;
var j = 0;

bullets = bullets.map(function (d) {
	i = d.ranges[0]
	j = d.ranges[1]
	d.markers = [i+(j-i)/2]
	return d;
});

var format = pv.Format.number();

var vis = new pv.Panel()
    .data(bullets)
    .width(190)
    .height(20)
    .margin(10)
    .left(95);


var bullet = vis.add(pv.Layout.Bullet)
    .orient("left")
    .ranges(function(d) d.ranges)
    .measures(function(d) d.measures)
    .markers(function(d) d.markers);
bullet.range.add(pv.Bar)
     .fillStyle(pv.colors(pv.rgb(255,0,102),pv.rgb(145,195,0),pv.rgb(1,176,241))); 
bullet.measure.add(pv.Bar)
	.fillStyle("black");
bullet.marker.add(pv.Dot)
	.lineWidth(1)
	.strokeStyle("red");
	/* Un commentaire sur plusieurs lignes
	2
	*/
bullet.tick.add(pv.Rule)
	.anchor("bottom").add(pv.Label)
	.text(bullet.x.tickFormat);



vis.render();
</script><br />
    </body>
</html>
