<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>Pyramid</title>
        <link type="text/css" rel="stylesheet" href="appbase.css">
        <link type="text/css" rel="stylesheet" href="wikistyle.css">
		<script src="http://kdmc.berkeley.edu/media/js/protovis/protovis-r3.2.js"  type="text/javascript"> </script>		
    </head>
    <body class="wikidpad">
<span class="wikidpad parent-nodes">parent nodes: <span class="wikidpad parent-node"><a href="Collection.html" class="wikidpad">Collection</a></span> | <span class="wikidpad parent-node"><a href="Protovis.html" class="wikidpad">Protovis</a></span> | <span class="wikidpad parent-node"><a href="Sparklines.html" class="wikidpad">Sparklines</a></span><br class="wikidpad" /><br class="wikidpad" /></span>
<a name=".h0"></a><h2 class="heading-level2">Pyramid</h2>
<script type="text/javascript+protovis">

var data = [
    {"sharedLabel" : "Category 1", "barData1" : 43041, "barData2" : 40852},
    {"sharedLabel" : "Category 2", "barData1" : 38867, "barData2" : 36296},
    {"sharedLabel" : "Category 3", "barData1" : 41748, "barData2" : 40757},
    {"sharedLabel" : "Category 4", "barData1" : 24831, "barData2" : 23624},
    {"sharedLabel" : "Category 5", "barData1" : 15764, "barData2" : 15299},
    {"sharedLabel" : "Category 6", "barData1" : 17006, "barData2" : 16071},
    {"sharedLabel" : "Category 7", "barData1" : 24309, "barData2" : 23235},
    {"sharedLabel" : "Category 8", "barData1" : 46756, "barData2" : 46065},
    {"sharedLabel" : "Category 9", "barData1" : 41923, "barData2" : 41704},
    {"sharedLabel" : "Category 10", "barData1" : 42565, "barData2" : 42159},
    {"sharedLabel" : "Category 11", "barData1" : 44316, "barData2" : 45468},
    {"sharedLabel" : "Category 12", "barData1" : 42975, "barData2" : 44223},
    {"sharedLabel" : "Category 13", "barData1" : 36755, "barData2" : 39452},
    {"sharedLabel" : "Category 14", "barData1" : 31578, "barData2" : 34063},
    {"sharedLabel" : "Category 15", "barData1" : 10328, "barData2" : 11799},
    {"sharedLabel" : "Category 16", "barData1" : 13917, "barData2" : 14949},
    {"sharedLabel" : "Category 17", "barData1" : 7920, "barData2" : 8589},
    {"sharedLabel" : "Category 18", "barData1" : 9003, "barData2" : 10397},
    {"sharedLabel" : "Category 19", "barData1" : 14322, "barData2" : 16832},
    {"sharedLabel" : "Category 20", "barData1" : 12369, "barData2" : 15836},
    {"sharedLabel" : "Category 21", "barData1" : 8710, "barData2" : 12377},
    {"sharedLabel" : "Category 22", "barData1" : 5853, "barData2" : 12213}   ]
;

	
var w = 600, 	h = 400, 	topMargin = 15,
	labelSpace = 40,	innerMargin = w/2+labelSpace,
	outerMargin = 15,
	gap = 2, 	baseColor = "#a7b6c1", 	highlightColor = "#a14538",
	dataRange = 120000, 	dataText = "bold 8pt Arial,sans-serif", 	leftLabel = "Left label",
	rightLabel = "Right label",
	labelText = "bold 8pt Arial,sans-serif",
	categoryText = "8pt Arial,sans-serif";


var chartWidth = (w-innerMargin-outerMargin)*2,
	barWidth = (h)/data.length,
	yScale = pv.Scale.linear(0, data.length).range(0, h-topMargin),
	total = pv.Scale.linear(0, dataRange).range(0,chartWidth),
	commas = pv.Format.number(),
	activeBar = -1;


var vis = new pv.Panel().width(w).height(h)
	.event("mousemove", pv.Behavior.point(Infinity).collapse("x"));
	
	
	vis.add(pv.Label)
		.data([leftLabel])
		.top(topMargin-3)
		.left(w-innerMargin) 
		.textAlign("right")		
		.font(labelText);
		
	
	vis.add(pv.Label)
		.data([rightLabel])
		.top(topMargin-3)
		.left(innerMargin) 
		.font(labelText);
			
		
	vis.add(pv.Bar)
		.data(data)
		.top(function() yScale(this.index)+topMargin)
		.width(function(d) total(d.barData2))
		.height(barWidth-gap)
		.right(innerMargin)
		.event("point", function() {activeBar = this.index; return vis;})
		.fillStyle(function() (activeBar == this.index) ? highlightColor : baseColor) 
		.anchor("left")
		.add(pv.Label)
		.textAlign("right")
		.text(function(d) commas(d.barData2))
		.font(dataText)
		.textStyle(function() (activeBar == this.index) ? "black" : "transparent");
		
		vis.add(pv.Bar)
		.data(data)
		.top(function() yScale(this.index)+topMargin)
		.width(function(d) total(d.barData1))
		.height(barWidth-gap)
		.left(innerMargin)
		.event("point", function() {activeBar = this.index; return vis;})
		.fillStyle(function() (activeBar == this.index) ? highlightColor : baseColor) 
		.anchor("right")
		.add(pv.Label)
		.textAlign("left")
		.text(function(d) commas(d.barData1))
		.font(dataText)
		.textStyle(function() (activeBar == this.index) ? "black" : "transparent");
			
	
	vis.add(pv.Bar)
		.data(data)
		.top(function() yScale(this.index)+topMargin)
		.height(barWidth-gap)
		.left(w/2)
		.fillStyle(null)
		.event("point", function() {activeBar = this.index; return vis;})
		.anchor("right")
		.add(pv.Label)
		.text(function(d) d.sharedLabel)
		.left(w/2)
		.textAlign("center")
		.font(categoryText)
		.textStyle(function() (activeBar == this.index) ? "black" : "gray");		

		vis.add(pv.Panel)
		.events("all") 
		.event("point", function() {activeBar = this.index; return vis;});

	vis.render();	 
</script><br />
<span class="wikidpad wiki-link"><a href="Sparklines.html" class="wikidpad">Previous</a></span> <span class="wikidpad wiki-link"><a href="SparkandBullet.html" class="wikidpad">Next</a></span>    </body>
</html>
