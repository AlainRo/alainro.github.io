<!DOCTYPE html><html lang="en-US"><head><script async="" src="https://www.google-analytics.com/analytics.js"></script><script async="" src="/ga/autotrack.custom.js"></script><link rel="preload" as="script" href="/templates/vendors~src-containers-Post.036e3e7c.js"/><link rel="preload" as="script" href="/templates/src-containers-Post.a970b7bc.js"/><link rel="preload" as="script" href="/templates/styles.f662f40c.js"/><link rel="preload" as="script" href="/templates/vendors~main.857017af.js"/><link rel="preload" as="script" href="/main.2e2eaa2e.js"/><link rel="preload" as="style" href="/styles.f662f40c.css"/><link rel="stylesheet" href="/styles.f662f40c.css"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/></head><body><div id="root"><div data-reactroot=""><h1 class="jss3 jss7 jss23 jss21 jss16"><img src="/files/logo.jpg"/><b> perceptible.fr</b><br/><font size="2">percevoir - comprendre - agir</font></h1><header class="jss38 jss44 jss29 jss33 jss35"><div class="jss65 jss67 jss66"><a class="jss95 jss69 jss71 jss74 jss90 active" aria-current="page" tabindex="0" role="button" href="/"><span class="jss70">Accueil</span><span class="jss98"></span></a><a class="jss95 jss69 jss71 jss74 jss90" tabindex="0" role="button" href="/about"><span class="jss70">Pour quoi faire ?</span><span class="jss98"></span></a><a class="jss95 jss69 jss71 jss74 jss90 active" aria-current="page" tabindex="0" role="button" href="/blog"><span class="jss70">Blog</span><span class="jss98"></span></a><a class="jss95 jss69 jss71 jss74 jss90" tabindex="0" role="button" href="/qui"><span class="jss70">Qui ?</span><span class="jss98"></span></a></div></header><div class="content"></div></div></div><script type="text/javascript">
    window.__routeInfo = {"path":"blog/spa","templateID":3,"sharedPropsHashes":{},"localProps":null,"allProps":{"post":{"title":"La single Page App","slug":"spa","contents":"<h1 id=\"single-page-app\">Single Page App</h1>\n<p>Ce document décrit la SPA telle que proposée par <a href=\"http://perceptible.fr\">perceptible.fr</a> dans certaines de ses réalisations.</p>\n<h2 id=\"architecture\">Architecture</h2>\n<p>Une Single Page Application (SPA) ou application web monopage en français est une application web accessible via une page web unique. Son intérêt est d&#39;éviter le chargement d&#39;une nouvelle page à chaque action demandée, et de fluidifier ainsi l&#39;expérience utilisateur. L’ensemble des éléments de l&#39;application est chargé (html, images, css, javascript et données) en une fois (ou si désiré en plusieurs fois dynamiquement en fonction des actions de l&#39;utilisateur).</p>\n<blockquote>\n<p>C’est un peu comme si le navigateur web devenait un ordinateur qui exécutait localement un programme téléchargé sur le web.</p>\n</blockquote>\n<p>Cette philosophie diffère radicalement de l’application web « classique » composée d’aller-retours continuels entre le « client  stupide et ignorant des données globales » et le serveur distant tout puissant. </p>\n<h2 id=\"fonctionnement\">Fonctionnement</h2>\n<p>La SPA est accessible via une adresse URL dans un navigateur: un clic sur un marque page ou sur un raccourci sur le bureau ou l’écran d’accueil.</p>\n<h3 id=\"importation-des-donn-es\">Importation des données</h3>\n<p>La SPA ne contient aucune donnée en propre et ne peut y accéder elle même. Les données sont contenues dans un fichier Excel qui est:</p>\n<ul>\n<li>placé à un endroit fixe. L’utilisateur délègue ses droits en lecture.</li>\n<li>désigné en cours d’utilisation de deux manières:<ul>\n<li>un bouton « lire le fichier » ouvre l’explorateur de fichiers et permet de désigner le classeur Excel (local ou distant)  </li>\n<li>un glisser/déposer du fichier dans la fenêtre (sur ordinateur  uniquement)</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"comportement-responsive-\">Comportement « responsive »</h3>\n<p>La page adapte dynamiquement son contenu à la taille du dispositif: la fenêtre sur le desktop, l’orientation sur la tablette ou le téléphone. Il ne s’agit pas seulement d’une mise à l’échelle mais aussi de ré-organisation « intelligente » de l’affichage.</p>\n<h3 id=\"impression-et-exportation\">Impression et exportation</h3>\n<p>La SPA est capable d’exporter son affichage sous plusieurs formats en plus du simple « imprimer » du navigateur. \nSont techniquement disponibles:</p>\n<ul>\n<li><strong>pdf</strong>: impression papier, archivage et diffusion</li>\n<li><strong>png</strong>: image de taille ajustable pour réutilisation dans des rapports par exemple Word ou PowerPoint</li>\n<li><strong>svg</strong>: dessin vectoriel capable d’être affiché à toute résolution sans perte de netteté</li>\n<li><strong>xlsx</strong>: sous-ensemble des données filtrées et pouvant aussi contenir les diagrammes </li>\n</ul>\n<h3 id=\"m-morisation-des-pr-f-rences-de-la-page\">Mémorisation des préférences de la page</h3>\n<p>La SPA est capable de mémoriser les préférences d’affichage dans le navigateur de telle sorte que le rafraichissement de la page ne perde pas les choix récents: couleur, position des blocs, filtres, … Cette mémorisation s’effectue localement au navigateur et est persistante d’une session à l’autre.</p>\n<h2 id=\"b-n-fices\">Bénéfices</h2>\n<p>Cette architecture de SPA très simple et minimale comporte de multiples avantages. </p>\n<h3 id=\"s-curit-\">Sécurité</h3>\n<ol>\n<li><strong>La SPA ne lit que les données que l’utilisateur désigne</strong>: Elle ne peut avoir accès qu’aux données déjà désignées et accessibles à l’utilisateur. </li>\n<li><strong>La SPA ne peut pas modifier les données</strong>: C’est la conséquence d’une sécurité globale des navigateurs, une page web ne peut pas <strong>écrire</strong> dans un fichier local. Elle ne peut que proposer le téléchargement d’un nouveau fichier.</li>\n<li><strong>La SPA n’ouvre pas de brèche de confidentialité</strong>: A l’ouverture de la SPA le navigateur charge l’intégralité du programme en mémoire. C’est ce programme qui va lire, décoder et afficher les données sur l’écran. <strong>Les données ne sortent pas de la machine qui exécute la SPA</strong>. </li>\n</ol>\n<h3 id=\"robustesse\">Robustesse</h3>\n<ol>\n<li><strong>Aucun risque de perte de données</strong>: la SPA ne peut pas altérer les données source. Seule l’interruption brutale du navigateur ou de la machine utilisée peut provoquer au pire la perte de la sélection courante.</li>\n<li><strong>Disponibilité totale</strong>: la SPA est disponible autant que l’infrastructure d’accès aux données l’est. </li>\n<li><strong>Résistant à la coupure internet</strong>: La SPA a la possibilité de s’exécuter en local (ordinateur ou réseau entreprise) sans nécessiter d’accès internet. </li>\n</ol>\n<h3 id=\"sobri-t-\">Sobriété</h3>\n<p>La SPA est particulièrement économe en moyens et ressources d’exploitation:</p>\n<ol>\n<li><strong>Pas besoin de serveur</strong>: l’intégralité des calculs s’effectuent sur les machines des utilisateurs. Les données restent à l’endroit où elle se trouvent. La SPA produit des éléments de rapports et d’analyse qui sont gérés par l’utilisateur comme des fichiers. </li>\n<li><strong>Ne nécessite aucune administration</strong>: inutile de gérer des comptes ou des autorisations d’accès, pas besoin de sauvegarde particulière, inutile de corriger l’intégrité des données manuellement après un crash, …</li>\n<li><strong>Une seule application pour tous les supports</strong>: la même SPA fonctionne sur les différents supports: ordinateur, tablette, téléphone, en adaptant dynamiquement son affichage aux tailles disponibles.</li>\n</ol>\n<h3 id=\"performance\">Performance</h3>\n<ol>\n<li><strong>Fluidité inégalée</strong>: une fois les données nécessaires chargées dans le navigateur, il est possible d&#39;utiliser des techniques de filtrage <strong>à la souris</strong>. </li>\n<li><strong>Chargement à la volée</strong>: le chargement des données nécessaires s&#39;effectue au fur et à mesure des fonctionnalités et des filtrages activés par l&#39;utilisateur. </li>\n<li><strong>Optimisation statique</strong>:  peu importe la complexité fonctionnelle de l&#39;application, elle sera vue comme une collection de simples pages html.</li>\n</ol>\n<h2 id=\"solution-technique\">Solution technique</h2>\n<h3 id=\"environnement-de-d-veloppement\">Environnement de développement</h3>\n<p>Le développement et la maintenance de l’application est réalisée sur GitHub, les outils de développement sont principalement:</p>\n<ul>\n<li>bundler: webpack 4.0</li>\n<li>transpiler: babel 7.0 </li>\n</ul>\n<h3 id=\"h-bergement-de-la-spa\">Hébergement de la SPA</h3>\n<p>La SPA est constitué d’un fichier html/css et d’un fichier javascript qu’il convient de rendre accessible à l’utilisateur. Il est possible d’héberger ces fichiers sur une infrastructure externe à l’entreprise privée ou publique (perceptible.fr, ovh.com, gitHub.io, …). C’est possible car ces fichiers ne sont pas confidentiels, ils ne contiennent aucune données propres à l’entreprise. Le fichier javascript est « minifié », c’est à dire rendu illisible à un humain: noms de variables raccourcies, optimisation du code, … Il est « économiquement » impossible de tenter une rétro-conception des algorithmes et de s’approprier le savoir faire à partir des fichiers accessibles.</p>\n<p>Au pire, ces deux fichiers peuvent aussi être placés dans un répertoire sur le réseau local de l’entreprise à l’abri de l’internet public. </p>\n<p>Dans tous les cas il faut rendre accessible ces fichiers à l’utilisateur via le protocole http (ou sa version cryptée https). Les solutions sont multiples: Apache, IIS, Nginx, … Une solution très simple et efficace en local est d’installer node.js qui permet l’exécution du package <strong>http-server</strong>. </p>\n<h3 id=\"navigateurs-support-s\">Navigateurs supportés</h3>\n<p>Les navigateurs Edge, Firefox, Opera, Chrome de versions récentes sont des supports d’exécution sans problèmes. Pour se rendre compatible avec des version plus anciennes, le transpiler babel permet de produire des « build » compatible avec une large plage de versions de navigateur. Il n’en reste pas moins que pour garantir le bon fonctionnement de la SPA sur une liste de navigateurs, il convient d’ajouter des tests fonctionnels dont le coût de passage est proportionnel au nombre de versions. </p>\n<h3 id=\"futur-responsive-web-app\">Futur: Responsive Web App</h3>\n<p>La <a href=\"https://developers.google.com/web/progressive-web-apps/\">Progressive Web App</a> est la version la plus aboutie de la SPA.  Elle apporte un certain nombre de bénéfices supplémentaires lui permettant de se rapprocher de l’application native:</p>\n<ul>\n<li>look and feel native (affichage plein écran sans barre d’adresse, …)</li>\n<li>chargement instantané après la première visite</li>\n<li>notifications push, toujours à jour, mode hors-ligne grâce aux service workers</li>\n</ul>\n<p><a href=\"https://www.powertrafic.fr/progressive-web-apps-web-mobile/\">Voir aussi</a>.</p>\n<p><a href=\"https://github.com/datavized/morph\">Morph</a> est un exemple récent d’une Responsive Web App (RWA) d’une taille significative.</p>\n"}},"siteData":{"title":"React Static"}};</script><script defer="" type="text/javascript" src="/templates/vendors~src-containers-Post.036e3e7c.js"></script><script defer="" type="text/javascript" src="/templates/src-containers-Post.a970b7bc.js"></script><script defer="" type="text/javascript" src="/templates/styles.f662f40c.js"></script><script defer="" type="text/javascript" src="/templates/vendors~main.857017af.js"></script><script defer="" type="text/javascript" src="/main.2e2eaa2e.js"></script></body><center><br/><hr/><div><b>perceptible.fr - 2018</b> | <a href="mailto:alain.roan@perceptible.fr">alain.roan@perceptible.fr</a> | 0619655383</div><br/></center></html>