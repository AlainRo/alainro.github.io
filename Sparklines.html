<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>Sparklines</title>
        <link type="text/css" rel="stylesheet" href="appbase.css">
        <link type="text/css" rel="stylesheet" href="wikistyle.css">
<script src="http://perceptible.fr/files/protovis-r32.js" type="text/javascript"> </script>
    </head>
    <body class="wikidpad">
<span class="wikidpad parent-nodes">parent nodes: <span class="wikidpad parent-node"><a href="Collection.html" class="wikidpad">Collection</a></span> | <span class="wikidpad parent-node"><a href="Ligne%20avec%20bulles.html" class="wikidpad">Ligne avec bulles</a></span> | <span class="wikidpad parent-node"><a href="Protovis.html" class="wikidpad">Protovis</a></span> | <span class="wikidpad parent-node"><a href="Pyramide.html" class="wikidpad">Pyramide</a></span><br class="wikidpad" /><br class="wikidpad" /></span>
 <br />
<script type="text/javascript+protovis">
var bars = [0.2, 0.3, 0.6, 0.1, 0.9, 0.8, 0.23, 0.77, 0.63, 0.43, 0.59, 0.11];

var sunspots = [
  40, 115, 100, 80, 60, 40, 23, 10, 10, 25, 75, 145,
  130, 130, 80, 65, 20, 10, 5, 10, 60, 190, 180, 175,
  120, 50, 35, 20, 10, 15, 30, 60, 105, 105, 105, 80, 65
];

function walk(n) {
  var array = [], value = 0, i = 0;
  while (n-- > 0) array.push(value += (Math.random() - .5));
  return array;
}

function random(n) {
  return pv.range(n).map(function() { return pv.random(2);});
}

function sparkline(data, dots) {
  var n = data.length,
      w = 2*n,
      h = 10,
      min = pv.min.index(data),
      max = pv.max.index(data);

  var vis = new pv.Panel()
      .width(w)
      .height(h)
      .margin(2);

  vis.add(pv.Line)
      .data(data)
      .left(pv.Scale.linear(0, n - 1).range(0, w).by(pv.index))
      .bottom(pv.Scale.linear(data).range(0, h))
      .strokeStyle("#000")
      .lineWidth(1)
    .add(pv.Dot)
      .visible(function() (dots && this.index == 0) || this.index == n - 1)
      .strokeStyle(null)
      .fillStyle("brown")
      .radius(2)
    .add(pv.Dot)
      .visible(function() dots && (this.index == min || this.index == max))
      .fillStyle("steelblue");

  vis.render();
}

function sparktick(data) {
  var w = data.length * 4,
      h = 11;

  var vis = new pv.Panel()
      .width(w)
      .height(h);

  vis.add(pv.Rule)
  	.bottom(h/2)
	.strokeStyle("grey");

  vis.add(pv.Bar)
	.data(data)
	.width(3)
	.left(function() 4 * this.index)
	.bottom(function(d) d ? h / 2 : 0)
	.height(h / 2)
	.strokeStyle("transparent")
	.fillStyle(function(d) d ? "grey" : "brown");
vis.render();
}


function sparkbar(data) {
  var w = 60,
      h = 12;

  var vis = new pv.Panel()
      .width(w)
      .height(h);

  vis.add(pv.Bar)
      .data(bars)
      .width(4)
      .left(function() 5 * this.index)
      .height(function(d) Math.round(h * d))
      .bottom(0);

  vis.render();
}

function dot(color) {
  var vis = new pv.Panel()
      .width(6)
      .height(9)
    .anchor("center").add(pv.Dot)
      .strokeStyle(null)
      .fillStyle(color)
      .radius(3);
  vis.render();
}

</script> <a name=".h46"></a><h2 class="heading-level2">Les Sparklines</h2>
Après avoir poussé aux limites les capacités des graphiques Excel natifs, on se tourne généralement vers des concepts plus avancés de représentation visuelle que sont les Sparklines inventées par Edward Tuffe. Les caractéristiques d'une Sparkline sont: 
<p /><ul class="wikidpad bulletlist">
<li />sa petite taille: similaire au texte dans laquelle elle figure <script type="text/javascript+protovis">sparkline(sunspots);</script> qui peut être directement commentée dans la phrase où elle est présente. Les points rouges (<script type="text/javascript+protovis">dot("brown");</script>) soulignent le début et la fin. Les points bleus (<script type="text/javascript+protovis">dot("steelblue");</script>) indiquent le minimum et le maximum. 
<li />sa densité de représentation de l'information permet d'inclure dans le texte la visualisation des données sans rompre le fil des phrases. Les ventes mensuelles sur le secteur <script type="text/javascript+protovis">sparkbar(bars);</script>sont très différentes de la moyenne <script type="text/javascript+protovis">sparkbar(bars);</script>.
<p /></ul>
Les Sparklines visent à être succinctes, facilement mémorisables et accolées directement au sujet qu'elles qualifient. 
<p />Par exemple la chronologie des gagnés perdus des réponses aux appels d'offre <script type="text/javascript+protovis">sparktick(random(20));</script>.  
<p /><script type="text/javascript+protovis">sparkline(walk(24), "blue");</script> <script type="text/javascript+protovis">sparkline(sunspots);</script>
<p />Une implémentation Open Source et très complète des Sparklines dans Excel a été réalisée par Fabrice Rimlinger. Il continue à y apporter des améliorations à un rythme régulier.
<p /><span class="wikidpad wiki-link"><a href="Ligne%20avec%20bulles.html" class="wikidpad">Précédent</a></span> <span class="wikidpad wiki-link"><a href="Pyramide.html" class="wikidpad">Suivant</a></span>
<p />    </body>
</html>
